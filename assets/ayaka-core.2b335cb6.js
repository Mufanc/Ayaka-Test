var n=Object.defineProperty;var l=(e,r,t)=>r in e?n(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var i=(e,r,t)=>(l(e,typeof r!="symbol"?r+"":r,t),t);import{p as h}from"./Article.448e7c17.js";import"./axios.bbb89d77.js";import"./index.9e09bd4f.js";class d{constructor(r){i(this,"router");this.router=r}jumpTo(r){if(typeof r.query.anchor!="string")return;const t=r.query.anchor,o=document.getElementById(t);o==null||o.scrollIntoView();let a;function s(){a&&window.clearTimeout(a),a=window.setTimeout(()=>{window.removeEventListener("scroll",s),o==null||o.classList.add("animate__flash"),setTimeout(()=>{o==null||o.classList.remove("animate__flash")},1e3)},100)}window.addEventListener("scroll",s)}}class u{constructor(){i(this,"router");i(this,"route");i(this,"anchor");i(this,"injectStyle",!0)}onLoad(r,t){this.router=r,this.route=t,this.anchor=new d(r)}onBeforeRouteUpdate(r){typeof r.query.anchor=="string"&&this.anchor.jumpTo(r)}onRendered(r){r("img").each((o,a)=>{var c;const s=(c=r(a).attr("src"))==null?void 0:c.replace("\\","/");s!=null&&s.startsWith("./")&&r(a).attr("src",h.join(this.route.path,s.substring(1)))});const t=["scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-200"].join(" ");r("pre").each((...[,o])=>{r(o).addClass(t)})}onViewUpdated(r){!r||(this.anchor.jumpTo(this.route),r.querySelectorAll(":is(h2, h3, h4)").forEach(t=>{t.addEventListener("click",()=>{t.classList.remove("animate__animated"),setTimeout(()=>{t.classList.add("animate__animated")},1200),this.router.replace({query:{anchor:t.id}}).catch(o=>{console.error(o)})})}),r.querySelectorAll("pre").forEach(t=>{t.addEventListener("wheel",o=>{t.scrollWidth>t.clientWidth&&(o.preventDefault(),t.scrollLeft+=o.deltaY)})}))}}const w=new u;export{w as default};
