var n=Object.defineProperty;var l=(e,r,o)=>r in e?n(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o;var i=(e,r,o)=>(l(e,typeof r!="symbol"?r+"":r,o),o);import{p as h}from"./Article.b3a771a5.js";import"./index.e99b5595.js";import"./axios.8c6e9a4b.js";class d{constructor(r){i(this,"router");this.router=r}jumpTo(r){if(typeof r.query.anchor!="string")return;const o=r.query.anchor,t=document.getElementById(o);t==null||t.scrollIntoView();let a;function s(){a&&window.clearTimeout(a),a=window.setTimeout(()=>{window.removeEventListener("scroll",s),t==null||t.classList.add("animate__flash"),setTimeout(()=>{t==null||t.classList.remove("animate__flash"),t==null||t.classList.add("animate__animated")},1e3)},100)}window.addEventListener("scroll",s)}}class u{constructor(){i(this,"router");i(this,"route");i(this,"anchor");i(this,"injectStyle",!0)}onLoad(r,o){this.router=r,this.route=o,this.anchor=new d(r)}onBeforeRouteUpdate(r){typeof r.query.anchor=="string"&&this.anchor.jumpTo(r)}onRendered(r){r("img").each((t,a)=>{var c;const s=(c=r(a).attr("src"))==null?void 0:c.replace("\\","/");s!=null&&s.startsWith("./")&&r(a).attr("src",h.join(this.route.path,s.substring(1)))});const o=["scrollbar-thin","scrollbar-thumb-gray-400","scrollbar-track-gray-200"].join(" ");r("pre").each((...[,t])=>{r(t).addClass(o)})}onViewUpdated(r){!r||(this.anchor.jumpTo(this.route),r.querySelectorAll(":is(h2, h3, h4)").forEach(o=>{o.addEventListener("click",()=>{o.classList.remove("animate__animated"),this.router.replace({query:{anchor:o.id}}).catch(t=>{console.error(t)})})}),r.querySelectorAll("pre").forEach(o=>{o.addEventListener("wheel",t=>{o.scrollWidth>o.clientWidth&&(t.preventDefault(),o.scrollLeft+=t.deltaY)})}))}}const w=new u;export{w as default};
